<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head'); %>
<body>
    <div class="blogs">
        <h3><%= blog.title %></h3>
        <strong><%= blog.snippet %></strong>
        <p><%= blog.body %></p>
        <a class="delete" data-doc="<%= blog._id %>">delete</a>
    </div>
</body>
<script>
    const trash = document.querySelector('.delete');

    trash.addEventListener('click', (e) => {
        const endpoint = `/blogs/${trash.dataset.doc}`;

        fetch(endpoint, {
            method: 'DELETE'
        })
        .then(response => response.json())
        .then(data => window.location.href = data.redirect)
        .catch(err => console.log(err));
    })
</script>
</html>